{%- if dev.alias is defined -%}
    <alias name='{{dev.alias.name}}'/>
{%- endif -%}

{%- if dev.address is defined -%}
    <address type='{{dev.address.type}}'{%- if dev.address.domain is defined -%} domain='{{dev.address.domain}}'{%- endif -%}{%- if dev.address.bus is defined -%} bus='{{dev.address.bus}}'{%- endif -%}{%- if dev.address.slot is defined -%} slot='{{dev.address.slot}}'{%- endif -%}{%- if dev.address.function is defined -%} function='{{dev.address.function}}'{%- endif -%}{%- if dev.address.multifunction is defined -%} multifunction='{{dev.address.multifunction}}'{%- endif -%}{%- if dev.address.controller is defined -%} controller='{{dev.address.controller}}'{%- endif -%}{%- if dev.address.target is defined -%} target='{{dev.address.target}}'{%- endif -%}{%- if dev.address.unit is defined -%} unit='{{dev.address.unit}}'{%- endif -%}{%- if dev.address.port is defined -%} port='{{dev.address.port}}'{%- endif -%}{%- if dev.address.reg is defined -%} reg='{{dev.address.reg}}'{%- endif -%}{%- if dev.address.cssid is defined -%} cssid='{{dev.address.cssid}}'{%- endif -%}{%- if dev.address.ssid is defined -%} ssid='{{dev.address.ssid}}'{%- endif -%}{%- if dev.address.devno is defined -%} devno='{{dev.address.devno}}'{%- endif -%}{%- if dev.address.iobase is defined -%} iobase='{{dev.address.iobase}}'{%- endif -%}{%- if dev.address.irq is defined -%} irq='{{dev.address.irq}}'{%- endif -%}>
        {%- if dev.address.zpci is defined -%}
            <zpci uid='{{dev.address.zpci.uid}}' fid='{{dev.address.zpci.fid}}'/>
    </address>
{%- endif -%}

{%- if dev.readonly is defined -%}
    <readonly/>
{%- endif -%}

{%- if dev.driver is defined -%}
    <driver name='{{dev.driver.name}}'{%- if dev.driver.type is defined -%} type='{{dev.driver.type}}'{%- endif -%}{%- if dev.driver.cache is defined -%} cache='{{dev.driver.cache}}'{%- endif -%}{%- if dev.driver.error_policy is defined -%} error_policy='{{dev.driver.error_policy}}'{%- endif -%}{%- if dev.driver.io is defined -%} io='{{dev.driver.io}}'{%- endif -%}{%- if dev.driver.ioeventfd is defined -%} ioeventfd='{{dev.driver.ioeventfd}}'{%- endif -%}{%- if dev.driver.event_idx is defined -%} event_idx='{{dev.driver.event_idx}}'{%- endif -%}{%- if dev.driver.copy_on_read is defined -%} copy_on_read='{{dev.driver.copy_on_read}}'{%- endif -%}{%- if dev.driver.discard is defined -%} discard='{{dev.driver.discard}}'{%- endif -%}{%- if dev.driver.detect_zeroes is defined -%} detect_zeroes='{{dev.driver.detect_zeroes}}'{%- endif -%}{%- if dev.driver.iothread is defined -%} iothread='{{dev.driver.iothread}}'{%- endif -%}{%- if dev.driver.queues is defined -%} queues='{{dev.driver.queues}}'{%- endif -%}{%- if dev.driver.iommu is defined -%} iommu='{{dev.driver.iommu}}'{%- endif -%}{%- if dev.driver.ats is defined -%} ats='{{dev.driver.ats}}'{%- endif -%}/>
{%- endif -%}
